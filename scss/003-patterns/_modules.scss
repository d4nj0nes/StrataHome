//-----------------------------------------------------------
// MODULES
//-----------------------------------------------------------

.m_hero {
	flex: 1 1 auto;

	img { object-position: top center; }
	picture { background-position: top center!important; }

	@include mq($md) {
		&--sm { min-height: 400px; }
	}
}

/*.m_cta {
	&__text { line-height: 1.25; }
	@include mq($lg) {
		background: transparent;
		&__text { @include font-size(24); }
	}
}*/

/*.m_accordion-sm {
	&__section:not(:first-child) &__toggle { margin-top: 2em; }

	&__icon {
		transition: transform $transition-time;
	}

	&__section.is-active &__icon { transform: rotate(45deg); }
}*/

.m_grid-item {

	flex: 0 0 100%;
	max-width: 100%;

	backface-visibility: hidden;

	&--one-third,
	&--one-half,
	&--funny,
	&--two-thirds,
	&--one-fourth { flex: 0 0 100%; }

	&--lg {
		&__inner {
			padding-left: 30px;
			padding-right: 30px;
			max-width: 620px;
			width: 100%;
			min-height: 150px;
		}
	}

	@include mq($md) {

		&--lg {
			padding: 0 15px;
			&__inner { min-height: 300px; }
			&:not(:first-child):after { top: 0; }
			&:not(:last-child):after { bottom: 0; }

			&.m-grid-item--full {
				flex-direction: row;
				.m_grid-item--lg__inner {
					display: flex;
					align-items: center;
					justify-content: center;
					max-width: 1000px;
					* { flex: 0 0 100%; }
				}
			}
		}

		&--one-third,
		&--one-half,
		&--funny,
		&--two-thirds,
		&--one-fourth {
			flex: 1 1 auto;
			width: 50%;
		}
	}

	@include mq($lg) {
		&--one-third { width: 33.33%; }
		&--one-half,
		&--funny { width: 50%; }
		&--two-thirds { width: 66.66%; }
		&--one-fourth { width: 25%; }
	}
}

.m_grid-border {

	&:before {
		@extend .u_overlay;
		border-style: solid;
		border-color: white;
		border-width: 1px 0;
	}

	@include mq($md) {
		margin: -1px;
		&:before { border-width: 2px; }

		&.m_grid-item--one-third,
		&.m_grid-item--one-half,
		&.m_grid-item--funny,
		&.m_grid-item--two-thirds,
		&.m_grid-item--one-fourth {
			margin: -1px;
			flex: 1 1 auto;
			width: calc(50% + 2px);
		}

		&.m-grid-item--full {
			margin: -2px 0;
			&:before {
				border-left: 0;
				border-right: 0;
			}
		}
	}

	@include mq($lg) {
		&.m_grid-item--one-third { width: calc(33.33% + 2px); }
		&.m_grid-item--one-half,
		&.m_grid-item--funny { width: calc(50% + 2px); }
		&.m_grid-item--two-thirds { width: calc(66.66% + 2px); }
		&.m_grid-item--one-fourth { width: calc(25% + 2px); }
	}

	@include mq($xxxl) {
		&.m_grid-item--one-third { width: calc(25% + 2px); }
	}
}

.m_grid-overlay {
	width: 100%;
	&-inner {
		flex: 0 0 100%;
		max-width: 100%;
	}

	&:after {
		@extend .u_overlay;
		@extend .u_bg--primary;
		opacity: 0;
	}

	@include mq($lg) {
		position: absolute;
		top: 1px;
		right: 1px;
		bottom: 1px;
		left: 1px;

		width: auto;
		opacity: 0;

		transition: all $transition-time;

		&:hover,
		&:after { opacity: 1; }

		&__icon { display: none; }

		&__headline {
			margin-top: 0;
			margin-bottom: 1em;
			padding-top: 0.4em;
			padding-bottom: 0;
			border-width: 2px 0 0 0;
			border-style: solid;
			border-color: currentColor;
			color: white;
		}
	}
}

.m_grid-hover {
	&:after {
		@extend .u_overlay;
		@extend .u_z---1;

		visibility: hidden;
		opacity: 0;
	}

	&:after,
	&__text,
	&__download  { transition: all $transition-time; }

	&__download {
		right: 30px;
		bottom: 30px;

		opacity: 0;
		visibility: hidden;
		backface-visibility: hidden;
	}

	&__download-icon {
		transform: rotate(90deg);
		backface-visibility: hidden;
	}

	.mz-hover &:hover {
		&:after,
		.m_grid-post__arrow,
		.m_grid-hover__download { visibility: visible; opacity: 1; }
		.m_grid-hover__text {
			color: white;
			border-color: white;
		}
	}
}

.m_grid-post {
	padding: 45px 0;
	min-height: 150px;

	&__arrow {
		top: 17px;
		right: 13px;
		opacity: 0;
		backface-visibility: hidden;
		visibility: hidden;
		transition: all $transition-time;
	}

	&__inner {
		padding: 0 30px;
		width: 100%;
		max-width: 620px;
	}

	.mz-hover &:hover &__arrow {
		opacity: 1;
		visibility: visible;
	}

	@include mq($md) {
		align-items: flex-start;
		padding: 90px 0;
	}

	@include mq($xl) {
		padding: 90px 15px;
	}
}

.m_content {
	overflow: hidden;
	padding-right: 30px;
	padding-left: 30px;

	&,
	hr {
		margin-right: -30px;
		margin-left: -30px;
	}

	@include mq($md) {
		margin-right: 0;
		margin-left: 0;
		padding-right: calc(50% - 300px);
		padding-left: calc(50% - 300px);

		hr {
			margin-right: -200px;
			margin-left: -200px;
		}

		&--md {
			padding-right: calc(50% - 400px);
			padding-left: calc(50% - 400px);
		}
	}
}

.m_content--md {
	overflow: hidden;
	padding-right: 30px;
	padding-left: 30px;
	margin-right: -30px;
	margin-left: -30px;

	@include mq($md) {
		margin-right: 0;
		margin-left: 0;
	}

	@include mq($lg) {
		padding-right: calc(50% - 400px);
		padding-left: calc(50% - 400px);
	}
}

/*.m_text-slider__slide {
	display: flex!important;
	width: 100%;
	height: 100%;

	@include mq($md) {
		padding-right: 90px;
		padding-left: 90px;
	}
}*/

/*.m_slider-nav {
	top: 50%;
	z-index: 1000;

	width: 60px;
	height: 60px;

	border-radius: 50%;
	cursor: pointer;

	transform: translateY(-50%);
	transition: all $transition-time;

	&--prev { left: 0; }
	&--next { right: 0; }
}*/

.m_filters {
	right: 0;
	left: 0;
	z-index: 3;

	&__filter:not(:first-child) { border-top: 0; }

	&__label {
		flex: 1 1 auto;
	}

	&__btn {
		flex: 0 0 58px;
		max-width: 58px;
		height: 56px;
		border-left: 2px solid currentColor;
		svg { transition: all $transition-time; }
	}

	&__filter.is-active &__btn svg {
		transform: rotate(180deg);
	}

	@include mq($lg) {
		position: absolute;
		margin-top: -72px;
		border: 0;
		background: transparent;

		&__hero { margin-bottom: 70px; }
	}
}

.m_filters-nav {
	top: 0;
	right: 58px;
	left: 0;
	line-height: 2.25;

	opacity: 0;
	visibility: hidden;
	transition: opacity $transition-time,
	            visibility $transition-time,
							background $transition-time,
							border $transition-time,
							height $transition-time;

	&.is-active {
		opacity: 1;
		visibility: visible;
	}

	@include mq($lg) {
		right: 0;
		left: 0;
		padding: 0 1em;
		height: 72px;
		opacity: 1;
		visibility: visible;
		background: transparent;
		border-width: 2px 0 0;
		border-color: rgba(255,255,255,0.4);
		line-height: normal;

		&__item,
		&__btn { @include font-size(14); }

		&__item {
			position: relative;
			margin: 0 10px;
			padding: 1em 0;

			&:before {
				position: absolute;
				top: -2px;
				right: -2px;
				left: -2px;
				display: block;
				height: 2px;
				border-top: 2px solid;
				content: '';
				transform: scaleX(0);
				transform-origin: left center;
				transition: all $transition-time;
			}

			&.is-active:before,
			.mz-hover &:hover:before { transform: scaleX(1); }
		}

		.btn-wrapper {
			margin-left: 10px;
			&:last-child { margin-right: 10px; }
		}
	}

	@include mq($xl) {
		&__item,
		&__btn { @include font-size(16); }

		&__item { margin: 0 15px; }
		.btn-wrapper {
			margin-left: 15px;
			&:last-child{ margin-right: 15px; }
		}
	}
}

.m_filters--light {
	right: 0;
	left: 0;
	z-index: 3;

	.m_filters__btn { border-color: color('grey', 100); }

	@include mq($lg) {
		margin-bottom: -1px;
		height: 72px;

		.m_filters-nav {
			border-bottom-width: 2px;
			border-color: color('grey', 100);
		}
	}
}

.m_filters-sticky {
	&.is-sticky {
		position: fixed;
		top: 70px;
		right: 0;
		left: 0;
		height: 50px;
		border: 0;
		backface-visibility: hidden;

		.m_filters-nav__item {
			padding: 0 1em;
			margin: 0 1px;
			color: white;

			&:before { display: none; }

			&:hover,
			&.is-active {
				background: white;
				@extend .t_c--primary;
			}
		}

		.m_filters-nav__btn-wrapper {
			align-self: stretch;
			margin: 0 1px;
		}

		.m_filters-nav__btn {
			border: 0;
			background: color('grey', 700);
			color: white;

			&:hover,
			&.is-active {
				background: white;
				@extend .t_c--primary;
			}
		}
	} // end is sticky

	&.is-absolute {
		position: absolute;
	}
}

/*.m_5050 {
	margin-bottom: 0!important;

	&__text { padding: 0 30px; }

	@include mq($lg) {
		&__item {
			flex: 0 0 50%;
			max-width: 50%;
		}

		&__text {
			margin-top: 0;
			padding: 0 0 0 60px;
		}
	}
}*/

.m_stat {
	flex: 0 0 50%;

	&__headline { font-weight: $weight-regular; }

	&:nth-child(odd) { padding-right: 10px; }
	&:nth-child(even) { padding-left: 10px; }

	@include mq($lg) {
		&:nth-child(odd) { padding-right: 30px; }
		&:nth-child(even) { padding-left: 30px; }
	}
}

.m_logo-grid {
	margin: 0 -30px 60px;

	&__item {
		flex: 1 1 auto;
		max-width: calc(50% - 60px);
		width: 100%;
		align-items: center;
		filter: url(../img/filter.svg#grayscale);
		filter: grayscale(1);
		filter: grayscale(100%);
		filter: gray;
		transition: all $transition-time;

		.mz-hover &:link:hover {
			filter: grayscale(0);
			filter: none;
		}
	}

	&__partner {
		max-width: none;

		picture, img {
			margin: 0 auto;
			max-width: 90px;
			max-height: 90px;
		}
	}

	@include mq($md) {
		margin: 60px -30px 15px;

		&__item{
			max-width: calc(25% - 60px);

			picture, img {
				margin: 0 auto;
				max-width: 180px;
				max-height: 180px;
			}
		}

		&__partner { max-width: none; }
	}

	@include mq($lg) { margin-bottom: 30px; }
}

.m_tc_logo-grid {
	&__item {
		margin: 10px 15px 10px 0;
		vertical-align: middle;
		filter: url(../img/filter.svg#grayscale);
		filter: grayscale(1);
		filter: grayscale(100%);
		filter: gray;
		transition: all $transition-time;

		.mz-hover &:hover {
			filter: grayscale(0);
			filter: none;
		}
	}

	&__text { margin-bottom: 10px; }

	&__logo img {
		max-width: 80px;
		width: auto;
		max-height: 20px;
		height: auto;
	}

	@include mq($md) {
		&__item { margin: 20px 30px 20px 0; }
		&__text { margin-bottom: 0; }

		&__logo img {
			max-width: 160px;
			max-height: 40px;
		}
	}
}

/*.m_content-grid {
	margin-right: -30px;
	margin-left: -30px;

	@include mq($md) {
		margin-right: 0;
		margin-left: 0;
	}
}*/

/*.m_grid-content {
	min-height: 240px;
	border: 2px solid currentColor;

	&:not(:first-child) { border-top-width: 1px}
	&:not(:last-child) { border-bottom-width: 1px; }

	&:after { border-color: transparent; }

	&__img { @extend .u_overlay; }

	&__overlay {
		position: static;
		height: 100%;
	}

	&__inner {
		flex: 0 0 100%;
		max-width: 100%;
	}

	&__title { transition: all $transition-time; }

	.mz-hover &:hover,
	&.is-active {
		&:after { opacity: 1; visibility: visible; }
		.m_grid-content__icon { transform: rotate(45deg); color: white; }
	}

	@include mq($md) {
		min-height: 300px;
		border: 0!important;

		&:after { border-color: white; }
	}

	@include mq($lg) {
		max-height: 400px;
		&__img { position: relative; }
		&__overlay { position: absolute; }
	}
}*/

.m_accordion-lg {
	margin: 0 -30px;

	&__toggle { padding: 15px 30px; }
	&__text { padding: 1px 30px 15px; }
	&__title { margin-right: 15px; }

	&__caret,
	&__icon { align-self: flex-start; }

	&__icon {
		margin-right: 15px;
		max-width: 30px;
		max-height: 30px;
	}

	&__h3 { transition: all $transition-time; }

	&__text,
	&__desc { @include font-size(16); }

	&__text-c .m_tc--r { margin-top: 30px; }

	li { font-style: normal; }

	&__section.is-active {
		.m_accordion-lg__aw { color: white!important; }
	}

	.mz-no-touchevents &__toggle:hover,
	&__section:not(&__section-c).is-active &__toggle {
		background: color('grey', 100);
	}

	@include mq($lg) {
		margin: 0;

		&__icon {
			align-self: center;
			margin-right: 30px;
			max-width: 60px;
			max-height: 60px;
		}

		&__title {
			margin-right: 30px;
			flex: 1 1 auto;
		}

		&__toggle { padding: 30px; }
		&__text { padding: 1px 30px 30px; }
		&__text-c { padding: 1px 30px; }

		&__text-c .m_tc--r { margin-top: 0; }

		&__text .l_container--sm { padding-left: 90px; }
	}
}

.m_illo-grid {

	padding-left: 15px;

	&__pager {
		position: absolute;
		top: 0;
		left: 0;
		bottom: 0;
		z-index: 2;
		margin-left: 22px;
		width: 2px;
		height: 0;
		transition: all $transition-time;
	}

	&__pager-f {
		left: -45px;
		z-index: 1;
		height: auto!important;
		&:before { display: none; }
	}

	&__i:last-child &__pager-f { bottom: 50%; }

	svg {
		display: block;
		margin: 0 0 30px;
		max-width: 150px;
		width: auto;
		max-height: 150px;
		height: auto;
	}

	&__bobble {
		position: absolute;
		top: 50%;
		left: -22px;
		z-index: 2;
		margin-top: -10px;
		margin-left: -5px;
		width: 10px;
		height: 10px;
		border-radius: 50%;
	}

	&__active {
		opacity: 0;
		visibility: hidden;
		transition: all $transition-time;
	}

	&__i.is-active &__active {
		opacity: 1;
		visibility: visible;
	}

	&__i.is-active &__bobble {
		@extend .u_bg--primary;
		transition: all $transition-time/2 $transition-time;
	}

	@include mq($md) {

		padding-left: 0;

		&__pager {
			left: 50%;
			margin-left: -1px;
		}

		&__bobble {
			left: 50%;
			margin-left: -5px;
		}

		svg {
			margin: 0;
			max-width: 200px;
			max-height: 200px;
		}

		&__l,
		&__r {
			flex: 0 0 50%;
			max-width: 50%;
		}

		&__i:nth-child(odd) &__l { order: -1; }

		&__i:nth-child(odd) &__l,
		&__i:nth-child(even) &__r,
		&__i:nth-child(even) &__active { padding-right: 60px; }

		&__i:nth-child(even) &__l,
		&__i:nth-child(odd) &__r,
		&__i:nth-child(odd) &__active { padding-left: 60px; }

		&__i:nth-child(odd) svg { margin-right: auto; }
		&__i:nth-child(even) svg { margin-left: auto; }

		&__i:nth-child(odd) &__l { text-align: right; }
		&__i:nth-child(odd) &__btn { justify-content: flex-end; }

	}

	@include mq($lg) {

		svg {
			max-width: 300px;
			max-height: 300px;
		}

		&__i:nth-child(odd) &__l,
		&__i:nth-child(even) &__r,
		&__i:nth-child(even) &__active { padding-right: 90px; }

		&__i:nth-child(even) &__l,
		&__i:nth-child(odd) &__r,
		&__i:nth-child(odd) &__active { padding-left: 90px; }
	}
}

.m_tc {
	position: relative;

	&__section { margin: 25px 0; }
	&__wrapper { margin: 40px 0; }

	&--r { margin-left: auto; }

	// sections siblings
	.m_illo-grid + &__wrapper,
	&__wrapper + .m_cta-grid,
	.m_cta-grid + &__wrapper,
	&__wrapper + .m_grid,
	.m_grid + &__wrapper { margin-top: 25px; }

	:not(&__section) > &__wrapper:last-child { margin-bottom: 65px; }
	&__section .m_grid:last-child { margin-bottom: -25px; }

	&__section &__wrapper:last-of-type .m_accordion-lg { margin-bottom: -40px; }

	.has-img,
	.has-embed,
	blockquote,
	video {
		margin: 0;
		&:not(:first-child) { margin-top: 1em; }
		&:not(:last-child) { margin-bottom: 1em; }
	}

	@include mq($lg, 'max', 'width') {
		.m_accordion-lg { border-bottom: 0; }

		.m_accordion-lg__toggle {
			background: color('grey', 100);
			border-top: 2px solid white;
		}

		.m_accordion-lg__section.is-active .m_accordion-lg__h3 {
			color: color('grey', 700)!important;
		}

		.m_accordion-lg__section.is-active li:before,
		.m_accordion-lg__section.is-active .m_accordion-lg__caret {
			color: white!important;
		}
	}

	@include mq($lg) {
		&__section { margin: 90px 0; }
		&__wrapper { margin: 60px 0; }

		.m_illo-grid + &__wrapper,
		&__wrapper + .m_cta-grid,
		.m_cta-grid + &__wrapper,
		&__wrapper + .m_grid,
		.m_grid + &__wrapper { margin-top: 90px; }

		:not(&__section) > &__wrapper:last-child { margin-bottom: 90px; }
		&__section .m_grid:last-child { margin-bottom: -90px; }

		&__section &__wrapper:last-of-type .m_accordion-lg { margin-bottom: 0; }

		&--l {
			flex: 0 0 35%;
			width: 35%;
		}

		&--r {
			flex: 0 0 60%;
			width: 60%;
		}
	}
}

.m_lab {
	&:not(:first-child) { margin-top: 30px; }
	@include mq($lg) {
		&:not(:first-child) { margin-top: 60px; }
	}
}

.m_cta-grid {
	flex: 0 0 100%;

	&:last-child { margin-bottom: -1px; }

	@include mq($lg) {
		.m_grid-item + &,
		.js-filter-sticky-bottom + & { margin-top: -2px; }
	}
}

.m_grid-unflex {
	@include mq($md) {

		&:before,
		&:after {
			position: absolute;
			top: 0;
			bottom: 0;
			margin-left: -1px;
			width: 2px;
			background: color('grey', 100);
			pointer-events: none;
			content: '';
		}

		&:before { left: 50%; }

		.m_grid-item--one-third,
		.p_grid-partner { flex-grow: 0; }
	}

	@include mq($lg) {
		&:before { left: 33.33%; }
		&:after { left: 66.66%; }
	}

	@include mq($xl) {
		&.p_partner-grid {
			&:before { left: 50%; }
			&:after { left: 75%; }
		}
	}

	@include mq($xxxl) {
		&:before { left: 50%; }
		&:after { left: 75%; }

		&.p_partner-grid {
			&:before,
			&:after {
				width: calc(16.6666666667% + 2px);
				background: transparent;
				border-right: 2px solid color('grey', 100);
				border-left: 2px solid color('grey', 100);
			}

			&:before { left: 33.3333333334%; }
			&:after { left: 66.6666666668%; }
		}
	}
}